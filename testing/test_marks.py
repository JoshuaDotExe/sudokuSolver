import unittest
import logging

from app.sudoku.game import sudoku

class TestMarks(unittest.TestCase):
    
    def setUp(self):
        logging.disable(logging.CRITICAL)
        self.testEasy = sudoku.buildGridJSON("_testEasy")
        self.testMedium = sudoku.buildGridJSON("_testMedium")
        self.testHard = sudoku.buildGridJSON("_testHard")
        self.testBlank = sudoku.buildGridJSON("_testBlank")
    
    def tearDown(self):
        del self.testEasy
        del self.testMedium
        del self.testHard
        del self.testBlank
    
    def test_removePencilMarksVertical(self):
        self.testBlank.removeMarkVertical("9", 0)
        p1_correct = [
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']]
        ]
        self.assertEqual(self.testBlank.marks, p1_correct)
    
    def test_removePencilMarksVertical(self):
        self.testBlank.removeMarkVertical("9", 0)
        p1_correct = [
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']]
        ]
        self.assertEqual(self.testBlank.marks, p1_correct)
        
    def test_removePencilMarksBox(self):
        self.testBlank.removeMarkBox("9", 0, 0)
        p1_correct = [
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9']]
        ]
        self.assertEqual(self.testBlank.marks, p1_correct)
    
    def test_removeBasicMarks(self):
        self.testBlank.grid[0][0] = "9"
        self.testBlank.grid[8][8] = "1"
        p1_correct = [
            [[],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['2','3','4','5','6','7','8']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9']],
            [['1','2','3','4','5','6','7','8'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['1','2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9']],
            [['2','3','4','5','6','7','8'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],['2','3','4','5','6','7','8','9'],[]]
        ]
        self.testBlank.removeBasicMarks()
        self.assertEqual(self.testBlank.marks, p1_correct)
    
    def test_initPencilMarks(self):
        correct = [
            [[], ['1', '3', '4', '8', '9'], ['1', '4', '7', '9'], ['3', '4'], ['4', '9'], [], ['3', '4'], ['3', '7', '8'], []],
            [['8'], [], ['4', '6'], [], ['4', '5'], ['3'], [], [], ['3', '4', '5', '6', '8']],
            [['9'], ['3', '4', '9'], ['4', '6', '7', '9'], [], [], [], ['3', '4', '5'], ['3', '5', '6', '7'], ['3', '4', '5', '6']],
            [[], ['1', '5', '9'], ['1', '2', '9'], [], ['2', '5', '7'], ['1', '2', '7'], ['1', '3', '5'], ['2', '3', '5', '6'], ['3', '5', '6']],
            [[], [], ['1', '2'], ['4', '5'], [], ['1', '2'], [], [], ['4', '5']],
            [[], ['1', '5', '8'], ['1', '2'], [], ['2', '4', '5'], [], ['1', '4', '5'], ['2', '5'], []],
            [['1'], ['1', '4'], [], [], ['2', '6'], ['2', '3'], [], ['3', '8'], ['3', '8']],
            [[], [], [], [], [], [], [], [], []],
            [[], ['9'], [], ['3'], ['7'], [], [], ['3', '5'], []]
        ]
        self.assertEqual(self.testEasy.marks, correct)